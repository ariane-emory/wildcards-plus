// =======================================================================================
// use wildcards to randomize some parts of the configuration before we get on with the
// actual textual content of the prompt:
// =======================================================================================

@lora_names :=
{ mj52_v2.0
| ethereon
| trendcraft_the_peoples_style_detailer_v2.1a_3_12_2025_sdxl
| add_detail_xl
| detailed_notrigger
| xl_more_art_full_v1
}

// named wildcard that expands into A1111-style lora expressions using one of the @lora_names.
@lora := { <lora:@lora_names: @random_weight> }

{ 0
  // devMODE
  %config.model("devmode8stepsflux1dev_v03gguidancefp8_f16.ckpt")
  %config.steps(8)
  // don't worry, capitalization will be automatically fixed to "Euler A":
  { %config.sampler("DDIM Trailing") | %config.sampler("Euler A") | %config.sampler("Euler A Trailing") }
  { %config.cfg_scale(1.0) | %config.cfg_scale(1.5) | %config.cfg_scale(2.0) | %config.cfg_scale(2.5) }

  // three possible resolutions:
  { 3 %config({ "width": 768, "height": 512 })
  | 2 %config({ "width": 768, "height": 384 })
  | 1 %config({ "width": 640, "height": 640 })
  }

| 3 // Hidream with some basic settings that seem to work alright:
  %config({ "model": "hidream_i1_fast_q5p.ckpt", "sampler": "DDIM Trailing", "shift": 1.50 })

  { 8 %config.cfg_scale(5.0 ) | 7 %config.cfg_scale(10.0) | 6 %config.cfg_scale(15.0) | 5 %config.cfg_scale(20.0)
  | 4 %config.cfg_scale(25.0) | 3 %config.cfg_scale(30.0) | 2 %config.cfg_scale(35.0) | 1 %config.cfg_scale(40.0)
  }

  // 9-13 steps, equally likely:
  { %config.steps(9) | %config.steps(10) | %config.steps(11) | %config.steps(12) | %config.steps(13) }

  // three possible resolutions:
  { 3 %config({ "width": 768, "height": 512 })
  | 2 %config({ "width": 768, "height": 384 })
  | 1 %config({ "width": 640, "height": 640 })
  }

| 3 // various SDXL models:
  #sdxl

  // 35, 40 or 45 steps, equally likely:
  { 3 %config.steps(35) | 2 %config.steps(40) | 1 %config.steps(45) }

  // three possible resolutions:
  { 2 %config({"width": 960, "height":512})
  | 2 %config({"width": 768, "height":512}) 
  | %config({"width": 768, "height":768})
  }

  // three possible 'shift' values:
  { %config.shift(1.00) | %config.shift(1.10) | %config.shift(1.20) }

  // two sampler possibilities:
  { %config.sampler("DPM++ 2M Karras") | %config.sampler("Euler A") }

  // eight possible CFG values:
  { %config.cfg_scale(3.0) | %config.cfg_scale(4.0) | %config.cfg_scale(5.0) | %config.cfg_scale(6.0) 
  | %config.cfg_scale(7.0) | %config.cfg_scale(8.0) | %config.cfg_scale(9.0) | %config.cfg_scale(10.0) }

  // lots of models pick from:
  { 4 %config.model("bookIllustrationChar_v10_f16")
  | 4 %config.model("challengexlv10yoursecret_v10_f16")
  | 0 %config.model("cyberrealisticpony_v10_f16") {@pony_score_7_up|@pony_score_8_up}
  | 0 %config.model("cyberrealisticpony_v90alt1_f16")
  | 2 %config.model("cyberrealisticxl_v56_f16")
  | 4 %config.model("nightvisionxl_v900_f16")
  | 8 %config.model("oldmaster_v30_f16")
  | 6 %config.model("zavychromaxl_v100_f16")
  }
}

// Chance of 'artsy' mode:
{#artsy}

// =======================================================================================
// make random sci-fi characters:
// =======================================================================================

// {#planet|#ship|#moon|#station} // where are we?

// @pro_pos_rand  := {2 @pro_pos_adj|a}
// @setting_word  := {?planet 2 planet|?moon 2 moon|?ship ship|?station station}

// @ship_term     := {starship|spacecraft|space ship|shuttle}
// @ship_late_adj := {space|interstellar}
// @ship_term2    := {starship|spacecraft|@ship_late_adj ship|{|interplanetary} shuttle
//                   |@ship_late_adj frigate
//                   |@ship_late_adj battleship|@ship_late_adj destroyer
//                   |{|@ship_late_adj} merchant vessel
//                   |{|@ship_late_adj} vessel}

// // ---------------------------------------------------------------------------------------
// // 'level 2' places, for phrases like 'in $place in a $largerPlace':
// // ---------------------------------------------------------------------------------------
// @l2_place     := {on a @l2_place_adj {?ship @ship_term2|?station space station
//                  |?planet planet|?planet world|?moon moon}}
// @l2_place_adj := 
// {
// |strange
// |exotic
// |!#crowded crowded
// |!#busy busy 
// |remote
// |secluded
// |run-down
// |!#advanced advanced
// |primitive
// |backwater
// |!#highly-detailed highly-detailed
// |!#greebled {|highly} greebled
// }
// @l2_orbit_obj_adj   := {dim|distant|huge|luminous|shining}
// @l2_orbit_obj       := {2 !planet {|ringed} planet|!planet !moon ship
//                        |!planet !moon space station|!planet !moon asteroid
//                        |!planet comet|2 {|2 yellow|2 red|green} star|black hole
//                        |!planet !moon satellite}
// @l2_orbit_phrase    := {@l2_orbit_obj_adj @l2_orbit_obj}
// @l2_place_phrase    := {@l2_place {|2 orbiting a @l2_orbit_phrase}}

// ---------------------------------------------------------------------------------------
// places to be 'in' or 'at':
// ---------------------------------------------------------------------------------------
@place_to_be_in := 
{2 #indoors  {2 crew cabin 
             |bar
             |control room
             |corridor
             |equipment room
             |laboratory
             |lounge
             |workshop
             |factory
             |security room
             |?station 2 market
             |?planet,moon #vehicle air/raft
             |?planet,moon #vehicle aerodyne
             |?planet,moon #vehicle {sky|hover|grav|air} {<car|transport|vehicle}
             |?planet,moon #vehicle {ground|all-terrain\ |combat\ }
                                    {<car|transport|vehicle}             
             |?ship,station 2 cockpit
             |?ship,station engine room
             |?ship,station airlock
             |?ship,station cargo bay
             |?ship,station docking bay
             |?ship @ship_term<'s bridge
             |{access|maintenance} tunnel
             }
|4 ?planet,moon #outdoors {alley
                        |{|2 hive city|2 megacity} street
                        |crater
                        |bazaar
                        |market
                        }
}
@place_to_be_at :=
{{ware|store} #indoors <house
|?planet,moon an alien ruin
|abandoned wreck of a @ship_term2
|{2|holographic} computer
|?planet,moon #outdoors colony
|holographic #indoors projector
|?planet,moon #outdoors launch pad
|?ship,station #indoors helm
|?ship,station 2 #indoors {|navigation|control|sensor|computer} console
}
@place_to_be_in_adj :=
{3
|!vehicle !#busy busy
|!vehicle !#crowded crowded
|messy
|noisy
|cluttered
|neon-lit
|?outdoors torchlit
|?outdoors 2 smoky
|?outdoors foggy
}
@place_phrase := {2 in {a|the} @#place_to_be_in @place_to_be_in_adj @place_to_be_in
                 |at {a|the} @#place_to_be_at @place_to_be_at}

// ---------------------------------------------------------------------------------------
// character adjectives:
// ---------------------------------------------------------------------------------------
@char_early_adj :=
{adventurous
|androgynous
|?neuter 2 androgynous
|mysterious
|solitary #solo
|inscrutable
|independant #solo
|daring
|resolute
|brave
|cunning
|inhuman
|intimidating
|exotic
|otherworldly
|athletic
|muscular
|youthful
|beautiful
}

// ---------------------------------------------------------------------------------------
// roles/character types:
// ---------------------------------------------------------------------------------------
@role :=
{#weapon mercenary
|{3|hyperdrive|@ship_term} technician
|engineer
|communications officer
|scientist
|explorer
|scout
|wanderer
|{2|interstellar} bounty hunter
|soldier
|prize fighter
|assassin
|medic
|worker
|{?traveller psion}
|{space|star|interstellar} {trader|merchant}
|{space|star} marine
|@ship_term captain
|@ship_term pilot
|{|@ship_term} {navigator|astrogator}
}

// =======================================================================================
// generate the prompt body:
// =======================================================================================

@aris_defaults, science fiction, {|futuristic,} {2|greebles,|greeblies,}
{|#traveller Traveller RPG,} {|#traveller GDW,} {|#traveller Third Imperium,}
hyperrealistic, photorealistic, infinite focus, extremely detailed, 100-hour render time,
.

\n\n

A piece {which depicts|depicting} a 
@role
@place_phrase 
.

